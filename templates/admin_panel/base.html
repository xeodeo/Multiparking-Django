<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin{% endblock %} - MultiParking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        mp: {
                            dark: '#0a0a14',
                            card: '#12121f',
                            border: '#1e1e3a',
                            purple: '#7c3aed',
                            'purple-light': '#a78bfa',
                            'purple-dark': '#5b21b6',
                            muted: '#9ca3af',
                            footer: '#0d0d1a',
                            sidebar: '#0e0e1a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #0a0a14;
        }

        .sidebar-link {
            transition: all 0.15s;
        }

        .sidebar-link:hover,
        .sidebar-link.active {
            background: rgba(124, 58, 237, 0.15);
            color: #a78bfa;
        }

        .sidebar-link.active {
            border-left: 3px solid #7c3aed;
        }

        /* Dark dropdown options */
        select option {
            background-color: #12121f;
            color: #fff;
        }

        /* Dark date picker */
        input[type="date"] {
            color-scheme: dark;
        }

        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(0.7) sepia(1) saturate(3) hue-rotate(220deg);
            cursor: pointer;
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>

<body class="text-white min-h-screen flex">

    <!-- SIDEBAR -->
    <aside id="sidebar" class="fixed inset-y-0 left-0 w-56 bg-mp-sidebar border-r border-mp-border flex flex-col z-40">
        <!-- Logo -->
        <div class="px-5 py-4 border-b border-mp-border">
            <a href="{% url 'admin_dashboard' %}" class="text-lg font-extrabold">
                <span class="text-mp-purple-light">Multi</span>Parking
            </a>
        </div>

        <!-- Nav -->
        <nav class="flex-1 py-4 px-3 space-y-1 overflow-y-auto text-sm">
            <a href="{% url 'admin_dashboard' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'dashboard' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
                </svg>
                Panel Principal
            </a>
            <a href="{% url 'admin_pisos' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'pisos' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3H21" />
                </svg>
                Pisos
            </a>
            <a href="{% url 'admin_espacios' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'espacios' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                </svg>
                Espacios
            </a>
            <a href="{% url 'admin_vehiculos' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'vehiculos' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
                </svg>
                Vehículos
            </a>
            <a href="{% url 'admin_tarifas' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'tarifas' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Tarifas
            </a>
            <a href="{% url 'admin_reservas' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'reservas' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z" />
                </svg>
                Reservas
            </a>
            <a href="{% url 'admin_tipos_espacio' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'tipos_espacio' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                </svg>
                Inventario
            </a>
            <a href="{% url 'admin_cupones' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg {% if active_page == 'cupones' %}active{% endif %}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z" />
                </svg>
                Cupones
            </a>
        </nav>

        <!-- Logout -->
        <div class="px-3 py-4 border-t border-mp-border">
            <a href="{% url 'logout' %}"
                class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-mp-muted">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6A2.25 2.25 0 005.25 5.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
                </svg>
                Cerrar Sesión
            </a>
        </div>
    </aside>

    <!-- MAIN -->
    <div class="ml-56 flex-1 flex flex-col min-h-screen">
        <!-- TOP BAR -->
        <header
            class="h-16 bg-mp-card border-b border-mp-border flex items-center justify-between px-6 sticky top-0 z-30">
            <div class="flex items-center gap-3">
                <span class="text-mp-purple-light font-bold text-lg">MultiParking</span>
                <span class="text-xs bg-mp-border text-mp-muted px-2 py-1 rounded">Panel de Administrador</span>
            </div>
            <div class="flex items-center gap-4">
                <div id="clockDisplay" class="text-right hidden sm:block">
                    <div class="text-white text-sm font-mono font-bold"></div>
                    <div class="text-mp-muted text-xs"></div>
                </div>
                <div class="text-right">
                    <p class="text-white text-sm font-medium">{{ request.session.usuario_nombre }}</p>
                    <p class="text-mp-muted text-xs">{{ request.session.usuario_correo }}</p>
                </div>
            </div>
        </header>

        <!-- CONTENT -->
        <main class="flex-1 p-6">
            <!-- Messages -->
            {% if messages %}
            <div class="mb-4 space-y-2">
                {% for message in messages %}
                <div class="px-4 py-3 rounded-lg text-sm
                {% if message.tags == 'error' %}bg-red-900/50 border border-red-700 text-red-300
                {% elif message.tags == 'success' %}bg-green-900/50 border border-green-700 text-green-300
                {% else %}bg-blue-900/50 border border-blue-700 text-blue-300{% endif %}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

            {% block content %}{% endblock %}
        </main>
    </div>

    <script>
        // Clock
        function updateClock() {
            const now = new Date();
            const el = document.getElementById('clockDisplay');
            if (!el) return;
            const time = now.toLocaleTimeString('es-CO', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const date = now.toLocaleDateString('es-CO', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            el.children[0].textContent = time;
            el.children[1].textContent = date;
        }
        updateClock();
        setInterval(updateClock, 1000);
    </script>
    {% block extra_js %}{% endblock %}
</body>

</html>